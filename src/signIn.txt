import React, {useState, useEffect} from "react"
import {
    BrowserRouter as Router,
    Switch,
    Route,
    Link,
    Redirect
  } from "react-router-dom";

function SignIn() {

    const [state, setState] = useState(()=> ({
        email: "",
        password: ""
      }))


      const submit = (e) => {

        fetch("http://localhost:3000/signIn", {
            method: "POST",
            mode: "cors",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                email: state.email,
                password: state.password
            })
        }).then(res => {
            setState(ps => ({...ps, email:"", password: ""}))


        }).catch(err => console.log(err))
      }

      const valueChange = (e) => {
          let value = e.target.value;
          let name = e.target.name;
          setState(ps => ({...ps, [name]: value }))

      }

      
    return (
        <div>

        <form onSubmit={submit}>

            <input type="email" name="email" placeholder="email" required value={state.email} onChange={valueChange} />
            <input type="password" name="password" placeholder="password" required value={state.password} onChange={valueChange} />

            <input type="submit" value="SUBMIT"></input>

        </form>
        
        <Link to="/signUp">Sign Up</Link>
        
        {state.username}
        {state.password}
            
        </div>
    )
}

export default SignIn
